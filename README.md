[![Open in Codespaces](https://classroom.github.com/assets/launch-codespace-2972f46106e565e64193e422d61a12cf1da4916b45550586e14ef0a7c637dd04.svg)](https://classroom.github.com/open-in-codespaces?assignment_repo_id=16987533)
# DS-217 Final Exam: Multiple Sclerosis Analysis

## Question 1: Data Preparation with Command-Line Tools
- Script: `prepare.sh`
1. Generated dirty data using `generate_dirty_data.py`
2. Clean raw data
    - While testing, I realized there were errors if I tried to output to the same file that was the input, so I opted to avoid multiple steps by using pipes in the clean-up steps
    - Clean-up steps used `grep` and `sed` to remove comment lines, then remove empty lines, then replace double commas with a single comma
    - Output of the clean-up was put into a cut step using a pipe to extract only the necessary columns, and the final output of this step was outputted to `ms_data.csv`
3. A list of labels for an `insurance_type` variable was created using `echo`
4. Display summary of processed data
    - Terminal displays the number of entries in `ms_data.csv` using line count through `wc`
    - Terminal also displays the first 8 lines of `ms_data.csv` using `head`

## Question 2: Data Analysis with Python
- Script: `analyze_visits.py`
1. Read and structure data, then add insurance information
    - Read `ms_data.csv` as a Pandas data frame and converted `visit_dates` to date format
    - Used a dictionary to assign a random insurance type from `insurance.lst` to each unique `patient_id` value, then used that dictionary to populate `insurance` column in the data frame to ensure each patient had a consistent insurance type
    - `visit_cost` column was generated by having each cell randomly generate a cost within a certain range for each insurance type; each insurance type was assigned an average cost, and the generated costs could fluctuate between 80-120% of that average
2. Calculate summary statistics
    - Summary statistics for walking speed by education level and visit cost by insurance type were calculated using `.groupby().mean()`
    - Walking speed by age was fit to a linear regression to determine the effect of aging one year on walking speed, represented by the coefficient for `age`
- Results of `analyze_visits.py` was output to the text file `analyze_visits_result.txt`
- Final data frame was written into `ms_data_insurance.csv` for use in the next question's Python script

## Question 3: Statistical Analysis
- Script: `stats_analysis.py`
- Read `ms_data_insurance.csv` for previously generated `insurance` data
1. Analyze walking speed
    - Performed a multiple linear regression to determine average change in `walking_speed` per unit of `age` and average change in `walking_speed` by category of `education_level`
    - P>|t| values for all coefficients were less than 0.001, indicating the existence of a statistically signficant effect of `age` and `education_level` on `walking_speed`
2. Analyze visit costs
    - Summary statistics for `visit_cost` were printed for both the overall data and for each type of `insurance`
3. Advanced analysis
    - Crude `age` coefficient was found for the linear regression model predicting `walking_speed` based on `age`, and adjusted `age` coeffcient was found using the multiple linear regression model predicting `walking_speed` based on both `age` and `education_level`
        - Comparing the difference in the crude and adjusted coefficients suggested that there is no confounding effect by `education_level` on the relationship between `age` and `walking_speed`
    - Interaction effects by `education_level` on the relationship between `walking_speed` and `age` were found by using a linear regression model with the formula `walking_speed~age*education_level`
        - The low P>|t| value of 0.028 for the coefficient of `age:education_level[T.Graduate]` suggests there is some statistically significant interaction effect on `age` and `walking_speed` in at least some categorical levels of `education_level`
- Results of `stats_analysis.py` was output to the text file `stats_analysis_result.txt`
- Boxplot for BMI by age group and scatterplot for walking speed by both age and education level were output to `cost-by-insurance.jpg` and `walkspeed-by-age-edu.jpg` respectively

## Question 4: Data Visualization
- File: `visualize.ipynb`
- Scatterplot and linear regression model were plotted for walking speed vs. age
    - The scatterplot showed an inverse relationship between walking speed and age, and the variation around the linear regression model appears to be uniform
- Linear regression model equation was printed using `params` to obtain the appropriate coefficients from the linear regression
    - Based on the coefficient of the model, walking speed decreases on average by about 0.031 units per year older a subject is
- Boxplot for distributions of walking speed separated by education level was plotted
    - All education level categories contained outliers for walking speed
    - From greatest to least medians, the categories are ordered: Graduate, Bachelors, Some College, High School
- Data was separated into four subsets of data based on education level
- Each subset of data was ordered by age, then the age value rounded to the nearest whole number
- The mean walking speed of each age value was plotted on a line graph
    - Based on this plot, from highest to lowest walking speed, education level is consistently ordered Graduate, Bachelors, Some College, High School
    - Plot was tweaked so that the order of the legend matches the order of the groups in terms of walking speed

- Cost analysis:
   - [ ] Bar plot of mean costs by insurance type
   - [ ] Box plots showing cost distributions
   - [ ] Add error bars or confidence intervals
- Combined visualizations:
   - [ ] Pair plot of key variables
   - [ ] Faceted plots by education/insurance
   - [ ] Time trends where relevant